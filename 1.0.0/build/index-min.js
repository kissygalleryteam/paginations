KISSY.add("kg/paginations/1.0.0/index",["base","kg/xtemplate/3.3.3/runtime","kg/paginations/1.0.0/tpl","node"],function(e,t,a,n){var i,r=t("base"),s=t("kg/xtemplate/3.3.3/runtime"),u=t("kg/paginations/1.0.0/tpl"),g=t("node");i=function(e){var t=g.all,a=r,n=s,i=u,p={DISABLED:"disabled",NEXT:"next",PREV:"prev",ITEM:"item",SKIP:"skip"},o={ITEM:"J_Item",SKIP_INPUT:"J_SkipInput"},l={PREV:"prev",NEXT:"next",DOT:"dot",SKIP:"skip",PAGE:"page"},h={sum:function(e){for(var t=0,a=0,n=e.length;n>a;a++)t+=parseInt(e[a]);return t}},c=a.extend({initializer:function(){var e=this;return e.set("$container",t(e.get("$container"))),e._render(),e._bind(),e},_pushItemByRange:function(e,t,a,n){for(var i=e;t>=i;i++)a.push({value:i,current:n===i,type:l.PAGE})},_render:function(){var e=this;if(e.get("autoRender")){var t=e.get("totalPage"),a=e.get("currentPage"),i=e.get("continuity"),r=e.get("showNextAndPrev"),s=e.get("showNumbers"),u=e.get("showSkip"),g=[];if(s)if(0===i.length||h.sum(i)+2>t)e._pushItemByRange(1,t,g,a);else{var c,v=i[0],f=i[1],d=i[2],I=i[3];if(v+f+1>=a)e._pushItemByRange(1,a,g,a);else if(v>0&&e._pushItemByRange(1,v,g,a),g.push({type:l.DOT}),f>0){var P=a-f;c=t-d-I-a,0>c&&(P+=c),e._pushItemByRange(1>P?1:P,a,g,a)}if(d+I>=t-a)e._pushItemByRange(a+1,t,g,a);else{if(d>0){var m=a+d;c=a-1-v-f,0>c&&(m-=c),e._pushItemByRange(a+1,m>t?t:m,g,a)}g.push({type:l.DOT}),I>0&&e._pushItemByRange(t-I+1,t,g,a)}}r&&(g.push({type:l.NEXT,disabled:a===t}),g.unshift({type:l.PREV,disabled:1===a})),u&&g.push({type:l.SKIP,value:a}),e.get("$container").html(new n(e.get("tpl")).render({totalPage:t,items:g,itemType:l,cls:p,sel:o}))}},_bind:function(){var e=this,a=e.get("$container");a.delegate("click tap","."+o.ITEM,function(a){a.halt(),e._eventHandle(t(a.currentTarget))})},_eventHandle:function(e){var t=this;e.hasClass(p.DISABLED)||t.get("freeze")||(e.hasClass(p.SKIP)&&t.get("$skipNumInput")[0].focus(),t.skip(t._getPageByTarget(e)))},_getPageByTarget:function(e){var t=this,a=1;return a=e.hasClass(p.NEXT)?t.get("currentPage")+1:e.hasClass(p.PREV)?t.get("currentPage")-1:e.hasClass(p.SKIP)?t.get("$skipNumInput").val():parseInt(e.attr("data-page"))},_validate:function(e){var t=this,a=t.get("totalPage"),n=parseInt(e),i=!0;return(isNaN(n)||n>a||1>n)&&(t.fire("skip:error",{page:e}),i=!1),i},skip:function(e){{var t=this,a=parseInt(e);t.get("totalPage")}if(t._validate(e)){var n=t.fire("before:skip",{page:a});n!==!1&&(t.set("currentPage",a),t._render(),t.fire("skip",{page:a}))}},show:function(){this.get("$container").show()},hide:function(){this.get("$container").hide()},destroy:function(){var e=this,t=e.get("$container");t.detach("click"),t.remove()}},{ATTRS:{$container:{value:"#J_VCPagination"},$skipNumInput:{value:"",getter:function(){return t("."+o.SKIP_INPUT,this.get("$container"))}},currentPage:{value:1},totalPage:{value:10},tpl:{value:i},showNextAndPrev:{value:!0},showNumbers:{value:!0},showSkip:{value:!0},continuity:{value:[2,2,2,0]},autoRender:{value:!0},freeze:{value:!1}}});return e=c}(),n.exports=i});